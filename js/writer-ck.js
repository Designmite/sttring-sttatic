angular.module("writer",["ui.bootstrap"]);var WriterCtrl=function(e,t){function n(){if(e.prevWriter!=""){if(e.whichWriter=="right")r();else if(e.whichWriter=="left"){e.previewText.push({line:e.right.text});e.hideLeft=!1;e.hideRight=!0;document.getElementById("leftText").focus()}}else if(e.whichWriter=="right")r();else if(e.whichWriter=="left"){e.hideLeft=!1;e.hideRight=!0;document.getElementById("leftText").focus()}e.left.text="";e.right.text="";e.prevWriter=e.whichWriter;document.getElementById("previewScroll").scrollTop=9999999}function r(){e.hideLeft=!0;e.hideRight=!1;i(e.timVineJokes[e.whichTimVineJoke].line);e.whichTimVineJoke++;e.whichTimVineJoke>=e.timVineJokes.length&&(e.whichTimVineJoke=0);e.previewText.push({line:e.left.text});document.getElementById("leftText").focus()}function i(n){var r;e.isTimText=n;var i=n.split(""),s=function(){if(i.length>0){e.right.text+=i.shift();document.getElementById("previewScroll").scrollTop=9999999;r=t(s,20)}else{t.cancel(r);e.whichWriter="left"}};s()}e.prevWriter="";e.whichWriter="left";e.controlChar="^";e.isControl=!1;e.viewSettings="darkScreen";e.viewText="fit";e.hideLeft=!0;e.hideRight=!0;e.lastChar="";e.left={name:"You",text:""};e.right={name:"Tim Vine",text:""};e.previewText=[];e.timVineJokes=[{line:"  Crime in multi-storey car parks. That is wrong on so many different levels. "},{line:"  Black Beauty? He was a dark horse. "},{line:"  Velcro? What a rip-off! "},{line:'  I phoned the local gym and I asked if they could teach me how to do the splits. He said, "How flexible are you?" I said, "I can\'t make Tuesdays." '},{line:"  Eric Bristow asked me why I put superglue on one of his darts. I said you just can't let it go can you? "},{line:"  I've just been on a once-in-a-lifetime holiday. I'll tell you what, never again. "},{line:"  Conjunctivitis.com – that’s a site for sore eyes. "}];e.whichTimVineJoke=Math.floor(Math.random()*7);e.$watch("whichWriter",n);e.writing=function(){document.getElementById("previewScroll").scrollTop=9999999;e.lastChar=e.left.text.slice(-1);e.lastCharCode=e.lastChar.charCodeAt(0);if(e.isControl){if(e.lastChar==="w"){e.left.text=e.left.text.slice(0,-2);e.whichWriter="right"}e.isControl=!1}!e.isControl&&e.lastChar===e.controlChar&&(e.isControl=!0)};e.open=function(){e.shouldBeOpen=!0};e.close=function(){e.closeMsg="I was closed at: "+new Date;e.shouldBeOpen=!1};e.opts={backdrop:!1,backdropFade:!0,dialogFade:!0}};