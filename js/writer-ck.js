angular.module("writer",["ui.bootstrap"]);var WriterCtrl=function(e,t){function n(){if(e.prevWriter!=""){if(e.whichWriter=="right"){e.previewText.push({line:e.left.text,style:e.left.style});e.hideLeft=!0;e.hideRight=!1;document.getElementById("leftText").focus()}else if(e.whichWriter=="left"){e.previewText.push({line:e.right.text,style:e.right.style});e.hideLeft=!1;e.hideRight=!0;document.getElementById("leftText").focus()}}else if(e.whichWriter=="right"){e.hideLeft=!0;e.hideRight=!1;document.getElementById("leftText").focus()}else if(e.whichWriter=="left"){e.hideLeft=!1;e.hideRight=!0;document.getElementById("leftText").focus()}e.left.style="";e.left.text="";e.right.text="";e.prevWriter=e.whichWriter;document.getElementById("previewScroll").scrollTop=9999999}function r(){var n,r=0,i=e.timVineJokes.line.split(""),s=function(){e.right.text+=i[r];r++;r>=i.length&&(r=0);document.getElementById("previewScroll").scrollTop=9999999;document.getElementById("chatHook").scrollTop=9999999;document.getElementById("rightText").scrollTop=9999999;n=t(s,80)};s()}e.prevWriter="";e.whichWriter="left";e.controlChar="^";e.isControl=!1;e.fullHeight="";e.screenSizeControl="icon-fullscreen";e.changeScreen=function(){if(e.fullHeight===""){e.screenSizeControl="icon-resize-small";e.fullHeight="fullHeight"}else{e.screenSizeControl="icon-fullscreen";e.fullHeight=""}document.getElementById("leftText").focus()};e.viewSettings="projector";e.viewText="fit";e.hideLeft=!0;e.hideRight=!0;e.lastChar="";e.left={name:"You",text:"",style:""};e.right={name:"Tim Vine",text:"",style:""};e.previewText=[];e.timVineJokes={line:"         \nCrime in multi-storey car parks. That is wrong on so many different levels.       \nBlack Beauty? He was a dark horse.       \nVelcro? What a rip-off!       \nI phoned the local gym and I asked if they could teach me how to do the splits. He said, \"How flexible are you?\" I said, \"I can't make Tuesdays.\"        \nEric Bristow asked me why I put superglue on one of his darts. I said you just can't let it go can you?        \nI've just been on a once-in-a-lifetime holiday. I'll tell you what, never again.        \n\rConjunctivitis.com – that’s a site for sore eyes."};e.chatHistory=[];e.$watch("whichWriter",n);r();e.chatting=function(){var t=e.currentChat.slice(-1);if(t==="\n"){e.chatHistory.push({line:e.currentChat,by:e.left.name});e.currentChat="";var n=Math.random()<.5?!0:!1;n&&e.chatHistory.push({line:"Velcro, what a rip-off!",by:e.right.name});document.getElementById("leftText").focus()}document.getElementById("chatHook").scrollTop=9999999};e.writing=function(){document.getElementById("previewScroll").scrollTop=9999999;e.lastChar=e.left.text.slice(-1);e.lastCharCode=e.lastChar.charCodeAt(0);if(e.isControl){if(e.lastChar==="w"){e.left.text=e.left.text.slice(0,-2);e.whichWriter==="left"?e.whichWriter="right":e.whichWriter="left"}if(e.lastChar==="c"){e.left.text=e.left.text.slice(0,-2);document.getElementById("currentChat").focus();e.whichWriter==="left"&&e.previewText.push({line:e.left.text,style:e.left.style});e.left.text=""}if(e.lastChar==="b"){e.left.text=e.left.text.slice(0,-2);e.previewText.push({line:e.left.text,style:e.left.style});e.left.text="";e.left.style="typeBold"}if(e.lastChar==="i"){e.left.text=e.left.text.slice(0,-2);e.previewText.push({line:e.left.text,style:e.left.style});e.left.text="";e.left.style="typeItalic"}if(e.lastChar==="n"){e.left.text=e.left.text.slice(0,-2);e.previewText.push({line:e.left.text,style:e.left.style});e.left.text="";e.left.style=""}e.isControl=!1}!e.isControl&&e.lastChar===e.controlChar&&(e.isControl=!0)};e.open=function(){e.shouldBeOpen=!0};e.close=function(){e.closeMsg="I was closed at: "+new Date;e.shouldBeOpen=!1};e.opts={backdrop:!1,backdropFade:!0,dialogFade:!0}};